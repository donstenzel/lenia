# Experimental!

Viridis â† Ã·â‚‚â‚…â‚…[[68 1 84]
               [33 145 140]
               [253 231 37]]

Magma â† Ã·â‚‚â‚…â‚…[[0 0 4]
             [183 55 121]
             [252 253 191]]

Plasma â† Ã·â‚‚â‚…â‚…[[12 8 135]
              [204 71 120]
              [240 249 33]]

# linear interpolation
# ? a b x
L â† +âŠ™Ã—âŸœ-

# colored ? grayscale colors
C â† L âˆ©âŒŸâŠ âŠ™âŠ™: â¨¬(
  0 1 Ã—â‚‚
| 1 2 -â‚ Ã—â‚‚
)âŠ¸â…

# bell ? Î¼ Ïƒ x
B â† â¿âŠ™eÂ¯Ã·âŸœâ¿2Ã·ğ„âŒ-

â”Œâ”€â•´Slow
  # pads both ends with n elements of the other end
  # padded ? n list
  WF â† âŠ‚âŠ‚âŠƒ(â†™Â¯)âŠƒâ‹…âˆ˜â†™
  
  # world ? kernel world
  ~Conv {K} â§ˆ(/+â™­Ã—K) â–³K
  
  # continuous life like cellular automaton
  â”Œâ”€â•´Lenia
    # kernel ? R Î²
    Kernel â† (
      Ã—â—¡â‹…â§»Ã·âŸœ(âŒµâ‰¡â‚‚/â„‚-|âŠâŠŸ.â‡¡+â‚Ã—â‚‚)
      Ã—Ã—âŠƒ(>âŠ™â§»|âŠâ†§âŠ¸âŠ“âŒŠ(-â‚â§»)|B 0.5 0.15 â—¿â‚)
      Ã·/+âŠ¸â™­
    )
    
    # world ? T R Î¼ Ïƒ Î² world
    ~U {T R Î¼ Ïƒ Î²} â†¥â‚€â†§â‚ +âŠ¸(
        WF R â‰¡WF R
        waitâ‰¡poolâ—‡(Conv Kernel) R Î² Â¤
        Ã·T Ã·â§»âŸœ/+ â‰¡(-â‚ Ã—â‚‚ B) Î¼ Ïƒ
      )
    
    ~Sim {f T R Î¼ Ïƒ Î²} â‡Œ[â¥âŠ¸(U T R Î¼ Ïƒ Î²)-â‚f]
  â””â”€â•´
  
  â”Œâ”€â•´Asymptotic
    Kernel â† Lenia~Kernel
    # world ? T R Î¼ Ïƒ Î² world
    ~U {T R Î¼ Ïƒ Î²} â†¥â‚€â†§â‚ +âŸœ(
        Ã·T Ã·â§»âŸœ/+ -âŒ
      | WF R â‰¡WF R
        waitâ‰¡poolâ—‡(Conv Kernel) R Î² Â¤
        â‰¡B Î¼ Ïƒ
      )
    
    ~Sim {f T R Î¼ Ïƒ Î²} â‡Œ[â¥âŠ¸(U T R Î¼ Ïƒ Î²)-â‚f]
  â””â”€â•´
  
  â”Œâ”€â•´MultiChannel
    # kernel ? R Ï Î²
    Kernel â† (
      Ã—â—¡â‹…â§»Ã·:Ã·âŸœ(âŒµâ‰¡â‚‚/â„‚-|âŠâŠŸ.â‡¡+â‚Ã—â‚‚)
      Ã—Ã—âŠƒ(>âŠ™â§»|âŠâ†§âŠ¸âŠ“âŒŠ(-â‚â§»)|B 0.5 0.15 â—¿â‚)
      Ã·/+âŠ¸â™­
    )
    
    # world ? T R Î¼ Ïƒ Î² world
    ~U {T R Î¼ Ïƒ Î² Ï H Câ‚€ Câ‚} â†¥â‚€â†§â‚ +âŸœ(
        âŠCâ‚€ â‰¡(WF R â‰¡WF R)
        waitâ‰¡poolâ—‡(Conv Kernel) R Ï Î²
        â‰¡(-â‚ Ã—â‚‚ B) Î¼ Ïƒ
        Ã·T âŠ•/+Câ‚ Ã—H
      )
    
    ~Sim {f T R Î¼ Ïƒ Î² Ï H Câ‚€ Câ‚} â‡Œ[â¥âŠ¸(U T R Î¼ Ïƒ Î² Ï H Câ‚€ Câ‚)-â‚f]
  â””â”€â•´
  
  â”Œâ”€â•´AsymptoticMulti
    Kernel â† MultiChannel~Kernel
    # world ? T R Î¼ Ïƒ Î² world
    ~U {T R Î¼ Ïƒ Î² Ï H Câ‚€ Câ‚} â†¥â‚€â†§â‚ +âŸœ(
        â¨¬(-â‚â‹…Ã—â‚‚|-â‚â‹…Ã—â‚‚|-)âŸœâŠCâ‚
        Ã·T âŠ•/+Câ‚ Ã—H
      | âŠCâ‚€ â‰¡(WF R â‰¡WF R)
        waitâ‰¡poolâ—‡(Conv Kernel) R Ï Î²
        â‰¡B Î¼ Ïƒ)
    
    ~Sim {f T R Î¼ Ïƒ Î² Ï H Câ‚€ Câ‚} â‡Œ[â¥âŠ¸(U T R Î¼ Ïƒ Î² Ï H Câ‚€ Câ‚)-â‚f]
  â””â”€â•´
â””â”€â•´

# freq ? time
FFT â† âŒ…(â¥(â‰fft)â§»âŠ¸â–³|â¥Â°(â‰fft)â§»âŠ¸â–³)

# shifted ? reg
FFTShift â† â¥(â‰âŠ‚âŠƒâ†˜â†™âŒˆÃ·â‚‚âŠ¸â§»)â§»âŠ¸â–³

Conv â† Ã—âˆš/Ã—âŠ¸â–³ âœâˆ©FFTÃ—

Real â† â—ŒÂ°â„‚

â”Œâ”€â•´Lenia
  # kernel ? R Ws Î²
  Kernel â† (
    Ã—â—¡â‹…â§»Ã·âŠ™(âŒµâ‰¡â‚‚/â„‚ -Ã·â‚‚âŠ¸â§» âŠâŠŸ.â‡¡)
    Ã—Ã—âŠƒ(>âŠ™â§»|âŠâ†§âŠ¸âŠ“âŒŠ(-â‚â§»)|B 0.5 0.15 â—¿â‚)
    FFTShift Ã·/+âŠ¸â™­
  )
  
  # world ? T R Î¼ Ïƒ Î² world
  ~U {T R Î¼ Ïƒ Î²} â†¥â‚€â†§â‚ +âŸœ(
      âŠƒ(R|â§»|Î²|Â¤)
      waitâ‰¡poolâ—‡(Real Conv Kernel)
      Ã·T Ã·â§»âŸœ/+ â‰¡(-â‚ Ã—â‚‚ B) Î¼ Ïƒ
    )
  
  ~Sim {f T R Î¼ Ïƒ Î²} â‡Œ[â¥âŠ¸(U T R Î¼ Ïƒ Î²)-â‚f]
â””â”€â•´

â”Œâ”€â•´Asymptotic
  # kernel ? R Ws Î²
  Kernel â† Lenia~Kernel
  
  # world ? T R Î¼ Ïƒ Î² world
  ~U {T R Î¼ Ïƒ Î²} â†¥â‚€â†§â‚ +âŸœ(
      Ã·T Ã·â§»âŸœ/+ -âŒ
    | âŠƒ(R|â§»|Î²|Â¤)
      waitâ‰¡poolâ—‡(Real Conv Kernel)
      â‰¡B Î¼ Ïƒ
    )
  
  ~Sim {f T R Î¼ Ïƒ Î²} â‡Œ[â¥âŠ¸(U T R Î¼ Ïƒ Î²)-â‚f]
â””â”€â•´

â”Œâ”€â•´Multi
  # kernel ? R Ws Ï Î²
  Kernel â† (
    Ã—â—¡â‹…â§»Ã·:Ã·âŠ™(âŒµâ‰¡â‚‚/â„‚ -Ã·â‚‚âŠ¸â§» âŠâŠŸ.â‡¡)
    Ã—Ã—âŠƒ(>âŠ™â§»|âŠâ†§âŠ¸âŠ“âŒŠ(-â‚â§»)|B 0.5 0.15 â—¿â‚)
    FFTShift Ã·/+âŠ¸â™­
  )
  
  # world ? T R Î¼ Ïƒ Î² world
  ~U {T R Î¼ Ïƒ Î² Ï H Câ‚€ Câ‚} â†¥â‚€â†§â‚ +âŸœ(
      âŠƒ(R|â‰¡â§»|Ï|Î²|âˆ˜) âŠCâ‚€
      waitâ‰¡pool(Real Conv â—‡Kernel)
      â‰¡(-â‚ Ã—â‚‚ B) Î¼ Ïƒ
      Ã·T âŠ•/+Câ‚ Ã—H
    )
  
  ~Sim {f T R Î¼ Ïƒ Î² Ï H Câ‚€ Câ‚} â‡Œ[â¥âŠ¸(U T R Î¼ Ïƒ Î² Ï H Câ‚€ Câ‚)-â‚f]
â””â”€â•´

â”Œâ”€â•´AMC
  # kernel ? R Ws Ï Î²
  Kernel â† Multi~Kernel
  
  # world ? T R Î¼ Ïƒ Î² world
  ~U {T R Î¼ Ïƒ Î² Ï H Câ‚€ Câ‚} â†¥â‚€â†§â‚ +âŸœ(
      â¨¬(-â‚â‹…Ã—â‚‚|-â‚â‹…Ã—â‚‚|-)âŸœâŠCâ‚
      Ã·T âŠ•/+Câ‚ Ã—H
    | âŠƒ(R|â‰¡â§»|Ï|Î²|âˆ˜) âŠCâ‚€
      waitâ‰¡pool(Real Conv â—‡Kernel)
      â‰¡B Î¼ Ïƒ)
  
  ~Sim {f T R Î¼ Ïƒ Î² Ï H Câ‚€ Câ‚} â‡Œ[â¥âŠ¸(U T R Î¼ Ïƒ Î² Ï H Câ‚€ Câ‚)-â‚f]
â””â”€â•´

# Ïƒ ? x
SoftMax â† Ã·â¤š+1â¿âŠ™eÃ—â‚‹â‚„-0.5

â”Œâ”€â•´SoftMaxAMC
  # kernel ? R Ws Ï Î²
  Kernel â† Multi~Kernel
  
  # world ? T R Î¼ Ïƒ Î² world
  ~U {T R Î¼ Ïƒ Î² Ï H Câ‚€ Câ‚} SoftMax +âŸœ(
      â¨¬(-â‚â‹…Ã—â‚‚|-â‚â‹…Ã—â‚‚|-)âŸœâŠCâ‚
      Ã·T âŠ•/+Câ‚ Ã—H
    | âŠƒ(R|â‰¡â§»|Ï|Î²|âˆ˜) âŠCâ‚€
      waitâ‰¡pool(Real Conv â—‡Kernel)
      â‰¡B Î¼ Ïƒ)
  
  ~Sim {f T R Î¼ Ïƒ Î² Ï H Câ‚€ Câ‚} â‡Œ[â¥âŠ¸(U T R Î¼ Ïƒ Î² Ï H Câ‚€ Câ‚)-â‚f]
â””â”€â•´

# applies colormap and upscales each frame
# colored ? grayscale colormap
GifReg â† waitâ‰¡âŒŸpool(â–½âŸœâ‰¡â–½4 C)
# transposes and upscales multi channel frames
GifMC â† â‰¡(â–½âŸœâ‰¡â–½4 â‰)
